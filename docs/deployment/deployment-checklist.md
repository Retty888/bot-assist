# Чек-листы деплоя

Сводный чек-лист для релизов Hyperliquid Signal Bot. Разделён на три этапа: подготовка, выполнение релиза и пост-деплой наблюдение.

## 1. Подготовка к релизу (Pre-release)

- [ ] Все PR смержены в release-ветку, пройдены код-ревью и статические проверки.
- [ ] В CI зелёные: unit, integration, e2e, lint, `npm audit --audit-level=high`.
- [ ] Собраны release notes (ключевые изменения, миграции, известные ограничения).
- [ ] Проверены конфиги окружений (переменные среды, секреты, версии образов/контейнеров).
- [ ] Выполнен smoke-тест на staging с последним билдом, сохранены результаты.
- [ ] Обновлены инструкции в runbook и документация оператора.
- [ ] Готов rollback plan (описан способ возврата на предыдущий тег/образ).
- [ ] Согласовано окно деплоя с трейдерами/операциями.

## 2. Во время релиза (Release execution)

- [ ] Зафиксирован git-тег/контейнерный образ и загружен в registry.
- [ ] Выполнен деплой через CD пайплайн / IaC скрипт; команда задокументирована.
- [ ] Проведён health-check сервиса (HTTP 200 на `/health` или `/api/default-signal`).
- [ ] Проведены smoke-тесты UI (открыть `/`, выполнить `Execute Signal` в demo-режиме).
- [ ] Проверены фоновые джобы/воркеры (если есть) — очередь без backlogs.
- [ ] Зафиксированы метрики до/после (latency, error rate, нагрузка) в мониторинге.

## 3. После релиза (Post-release)

- [ ] В течение первой часа включён повышенный мониторинг (alerts, dashboards).
- [ ] Проверено, что новые записи появляются в истории сигналов/сделок без ошибок.
- [ ] Верифицированы интеграции с внешними API (Hyperliquid, источники сигналов) — все токены активны.
- [ ] Выполнен контрольный запрос `npm audit` и проверка контейнерного образа (trivy/grype).
- [ ] Сформирован отчёт о релизе (время деплоя, результат, инциденты, follow-up задачи).
- [ ] Обновлены версии/состояния в CMDB/Notion/Jira.
- [ ] Планируется пост-релизная ретроспектива (при наличии крупных изменений).

## 4. Проверки мониторинга

- [ ] Alerting настроен по SLA: доступность API ≥ 99.5%, задержка подсказок ≤ 2s.
- [ ] Есть дашборды по ключевым метрикам (HTTP latency, ошибки, количество исполненных сигналов, время отклика Hyperliquid).
- [ ] Настроены synthetic тесты (cron пинги `/api/default-signal` / `/api/hints`).
- [ ] Логи централизованы (ELK/Cloud Logging) и доступны для поиска в течение ≥30 дней.
- [ ] Метрики инфраструктуры (CPU, память, диск, сеть) с порогами и авто-алертами.
- [ ] Оповещения уходят в дежурный канал (Slack/Teams) с резервным e-mail.

Чек-лист пересматривается после каждого релиза на ретроспективе и пополняется lessons learned.

