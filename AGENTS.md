# Agent Notes
- Purpose: automate Hyperliquid trading via parsed textual signals and normalized order execution.
- Primary modules: `src/trading/tradeSignalParser.ts` (signal parsing) and `src/trading/hyperliquidTradingBot.ts` (order orchestration).
- Tests: run `npm test` (Vitest) for parser and bot behaviors.
- Docs: repository naming guidance in `docs/github_repository_naming.md`.
- Next steps: integrate real signal source, expand error handling, wire deployment pipeline.

## План разработки

### Цели продукта и критерии готовности
- **MVP**: автоматическое исполнение торговых сигналов через `tradeSignalParser` и `hyperliquidTradingBot` с ручным вводом сигналов и симуляцией сделок. 
  - Критерии готовности: корректный парсинг основных типов сигналов, исполнение ордеров в песочнице, покрытие модулей unit-тестами (≥80%), базовый мониторинг логов.
- **Расширения**: подключение внешних источников сигналов, интеллектуальный риск-менеджмент, аналитические дашборды.
  - Критерии готовности: устойчивые интеграции (MTBF ≥ 1 неделя), метрики по качеству сигналов, алертинг при ошибках.
- **Эксплуатация**: стабильная работа бота с реальными средствами, наблюдаемость и процесс обновлений.
  - Критерии готовности: успешные e2e тесты на staging, SLO доступности 99.5%, регламент обновлений и откатов, документация для SRE/трейдеров.

### Этапы работ
1. **Сбор требований (1 неделя)**
   - Входы: бизнес-цели, регуляторные ограничения, исторические сигналы.
   - Выходы: спецификация пользовательских сценариев, SLA/SLO, приоритизированный backlog.
   - Ответственные: продакт-менеджер, техлид, риск-аналитик.
   - Инструменты: Notion/Confluence, Jira, интервью с трейдерами, анализ логов.
   - Метрики качества: полнота требований (покрытие ≥90% выявленных сценариев), согласование с ключевыми стейкхолдерами.

2. **Архитектура (4 рабочих дня)**
   - Входы: спецификация требований, текущая кодовая база.
   - Выходы: диаграммы компонентов, ERD/схемы данных, ADR по ключевым решениям.
   - Ответственные: техлид, архитектор.
   - Инструменты: Draw.io, Markdown ADR, code review.
   - Метрики качества: утверждение архитектурного ревью, оценка рисков и mitigation планов.

3. **Инфраструктура (5 рабочих дней)**
   - Входы: архитектурные решения, инфраструктурные требования.
   - Выходы: готовая CI/CD-пайплайн, конфигурация окружений (dev/staging), секрет-менеджмент.
   - Ответственные: DevOps-инженер.
   - Инструменты: GitHub Actions, Terraform/Helm (при наличии), Docker, Vault/Secrets Manager.
   - Метрики качества: время сборки <10 минут, автоматические проверки проходят ≥95%, инфраструктурные тесты зеленые.

4. **Реализация ключевых модулей (10 рабочих дней)**
   - Область: `src/trading/tradeSignalParser.ts`, `src/trading/hyperliquidTradingBot.ts`.
   - Входы: архитектурные спецификации, тестовые данные, интерфейсы API биржи.
   - Выходы: имплементация модулей, покрытие unit-тестами, обновленные интерфейсы.
   - Ответственные: backend-разработчики, техлид (код-ревью).
   - Инструменты: TypeScript, Vitest, eslint/prettier, Postman/Insomnia для проверки API.
   - Метрики качества: unit coverage ≥80%, среднее время ответа бота <1s при тестовой нагрузке, успешные тестовые сделки.

5. **Интеграции (5 рабочих дней)**
   - Входы: готовые модули, API поставщиков сигналов, Hyperliquid API.
   - Выходы: коннекторы к внешним сервисам, обработка ошибок и ретраев, обновленная конфигурация.
   - Ответственные: backend-разработчики, интеграционный инженер.
   - Инструменты: WebSocket/REST клиенты, договоренности об SLA с провайдерами.
   - Метрики качества: успешные интеграционные тесты ≥95%, автоматическое восстановление соединений <30 секунд.

6. **Тестирование (7 рабочих дней)**
   - Подэтапы: unit (Vitest), интеграционные (mock биржи), e2e (staging оркестрация).
   - Входы: функциональный код, тестовые сценарии, окружение staging.
   - Выходы: отчеты о тестировании, баг-трекинг, утвержденные релиз-критерии.
   - Ответственные: QA-инженер, разработчики (unit), DevOps (staging поддержка).
   - Инструменты: Vitest, Playwright/Cypress (e2e), k6 для нагрузочного теста, Jira для багов.
   - Метрики качества: тестовое покрытие ≥85%, критические дефекты устранены, успешный e2e прогон ≥2 подряд.

7. **Документация и деплой (4 рабочих дня)**
   - Входы: стабильная сборка, тестовые отчеты.
   - Выходы: обновленные README/руководства, runbook, релизные заметки, деплой на staging → production.
   - Ответственные: техрайтер, DevOps, техлид.
   - Инструменты: Markdown, GitHub Wiki, CI/CD пайплайн, Feature flags.
   - Метрики качества: документация пройдена по чек-листу, деплой без блокирующих инцидентов, подтверждение запуска стейкхолдерами.

### Временные ориентиры и зависимости
- Общая оценка: ~6 недель (30 рабочих дней) до MVP в продакшене.
- Зависимости: каждый этап стартует после утверждения предыдущего, кроме подготовки инфраструктуры, которая может идти параллельно второй половине архитектурной фазы.
- Критический путь: Сбор требований → Архитектура → Инфраструктура → Реализация ключевых модулей → Интеграции → Тестирование → Документация и деплой.
- Буфер: 10% времени (3 рабочих дня) закладывается на непредвиденные задачи, преимущественно между интеграциями и тестированием.

### Чек-лист готовности к продакшену
- [ ] Все тесты (unit/integration/e2e) зелёные и автоматизированы в CI.
- [ ] Релизная ветка подписана и прошла code review двумя разработчиками.
- [ ] Настроен мониторинг (latency, error rate, баланс, статус соединений).
- [ ] Наличие runbook с планом реагирования и откатом.
- [ ] Обновлена пользовательская и эксплуатационная документация.
- [ ] Проведён security review и проверка секретов.
- [ ] Подтверждены SLA с поставщиками сигналов и биржей.
- [ ] Проведён dry-run деплоя на staging с имитацией реальных сигналов.

### План поддержки и итераций после релиза
- Еженедельный обзор метрик производительности и финансовых результатов.
- Проактивные обновления бота при изменении API Hyperliquid или поставщиков сигналов.
- Ежеквартальные ретроспективы и обновление дорожной карты расширений.
- Канал обратной связи с трейдерами (Slack/Telegram) и таймбокс на реакцию ≤4 часа в рабочее время.
- План обновления моделей риск-менеджмента и алгоритмов исполнения каждые 2 недели или при изменении рынка.
